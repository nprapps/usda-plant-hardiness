<% var data = grunt.data.json.edited.filter(d => d.approved); %>

<section class="waterfall slide align-<%= slide.align || "right" %> <%= slide.layout %> <%= slide.classes %> <%= slide.constrain %>" id="<%= slide.id %>" data-type="waterfall">
  <!-- <img
    class="backdrop"
    data-src="./assets/synced/images/<%= slide.image %>"
    alt=""
    style="<%= t.style({
      "object-position": slide.anchor
    }) %>"
  > -->

  <% if (slide.text) { %>
  <div class="text">
    <%= t.renderMarkdown(slide.text) %>
  </div>
  <% } %>

<div class="graphic <%= slide.chart %>">
  <!-- The dots/circles -->
  <div class="controls">
    <button class="prev">
      &#10094;
      <span class="sr-only">Previous</span>
    </button>

    <div class="dots">
      <span class="dot dot-0"></span>
      <span class="dot dot-1"></span>
      <span class="dot dot-2"></span>
      <span class="dot dot-3"></span>
      <span class="dot dot-4"></span>
      <span class="dot dot-5"></span>
      <span class="dot dot-6"></span>
      <span class="dot dot-7"></span>
      <span class="dot dot-8"></span>
    </div>

    <button class="next">
      &#10095;
      <span class="sr-only">Next</span>
    </button>
  </div>

  <div class="slides-container active">
    <% data.forEach(function(row) { %>
      <div class="headline-item">
        <div class="location"><%= row.location %></div>
        <div class="headline"><%= row.excerpt %></div>
        <div class="publication">â€“ <%= row.attribution %></div>
      </div>
    <% }) %>
  </div>
</div>

</section>
